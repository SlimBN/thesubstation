---
layout: default
javascripts: true
---

{% comment %}
    http://jekyllrb.com/docs/configuration/#specifying-a-jekyll-environment-at-build-time
    https://www.siteleaf.com/blog/jekyll-environments/
    $ JEKYLL_ENV=production bundle exec jekyll serve
{% endcomment %}


{% include post-hero.html %}


{% unless page.dates.size == null %}
    <div class="c-post-info">
        <div class="o-container--postInfo">
            {% include post-info.html %}
        </div>
    </div>
{% endunless %}


{% comment %}
u-smDown-blockR--3by4
<div>debugâ€¦ url: {{ page.url }} categories: {{ page.categories }} slug: {{ page.slug }} permalink: {{ page.permalink }} title: {{ page.title }}</div>
{{ site.categories }} {{ page.categories }}
{% endcomment %}


<div class="c-post-article">
    <div class="o-container">
        <div class="Grid Grid--withGutter">
            <div class="Grid-cell u-sm-size7of10 u-xl-size8of10 u-smDown-blockT--3by4">

                <article class="s-post">
                    {{ page.content | markdownify }}

                    {% if !page.venue-cta %}
                        {% include venue-cta.html %}
                    {% endif %}
                </article>

                {% if page.image-credit or page.categories contains 'archive' %}
                    <div class="c-post-meta c-post-meta--endRule">
                        {% if page.image-credit %}
                            <p><span>Image credit: {{ page.image-credit }}</span></p>
                        {% endif %}
                        {% if page.categories contains 'archive' %}
                            <p><span>This show is <a href="/archive">archived</a>. It originally ran in {{ page.dates | first | date: "%Y" }}.</span></p>
                        {% endif %}
                    </div>
                {% endif %}

                {% unless page.categories %}
                    <div class="c-formWrapper">
                        {% include enews-form.html %}
                    </div>
                {% endunless %}

                {% if page.has-form != null %}
                    {% include form.html %}
                {% endif %}

            </div>

            <div class="Grid-cell u-sm-size3of10 u-xl-size2of10 u-smDown-flexOrderFirst">
                {% include post-aside.html %}
            </div>


            {% comment %}
            ------------------------------
                next / prev
            ------------------------------
            {% endcomment %}

            {% if page.url contains 'whats-on' %}
                {% assign categoryName = 'whats-on' %}
            {% elsif page.url contains 'in-development' %}
                {% assign categoryName = 'in-development' %}
            {% elsif page.url contains 'residents' %}
                {% assign collectionName = 'residents' %}
            {% elsif page.url contains 'venues' %}
                {% assign collectionName = 'venues' %}
            {% endif %}

            {% if categoryName %}
                <div class="Grid-cell ">
                    <div class="c-post-next">
                        <h3 class="c-nav-item"><a class="is-active" href="/{{ categoryName }}">More {{ categoryName | replace: '-', ' ' }}</a></h3>
                        <div class="o-grid c-postGrid--inPost">

                            {% for post in site.categories[categoryName] limit: 5 %}
                                {% comment %}
                                    Skip anything in the array that matches your argument, but keep looping over the rest of the values
                                    See: https://github.com/Shopify/liquid/wiki/Liquid-for-Designers
                                    And: https://help.shopify.com/themes/liquid/tags/iteration-tags
                                {% endcomment %}
                                {% if post.url contains page.url %}
                                    {% continue %}
                                {% endif %}
                                {% comment %}If it's not hidden, print it{% endcomment %}
                                {% include post-cell-alt.html %}
                            {% endfor %}

                        </div>
                    </div>
                </div>

            {% elsif collectionName %}
                <div class="Grid-cell ">
                    <div class="c-post-next">
                        <h3 class="c-nav-item"><a class="is-active" href="/{{ collectionName }}">More {{ collectionName | replace: '-', ' ' }}</a></h3>
                        <div class="o-grid c-postGrid--inPost">

                            {% for post in site[collectionName] limit: 5 %}
                                {% if !post.current %}
                                    {% if post.url contains page.url %}
                                        {% continue %}
                                    {% endif %}
                                    {% include post-cell-alt.html %}
                                {% endif %}
                            {% endfor %}

                        </div>
                    </div>
                </div>
            {% endif %}



        </div>
    </div>
</div>
